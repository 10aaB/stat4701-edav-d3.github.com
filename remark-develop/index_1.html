<!DOCTYPE html>
<html>
  <head>
    <title>Stephen and Danny's D3 Mapping Presentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle


# Stephen and Danny's D3 Mapping Presentation:
![googlemap](https://raw.githubusercontent.com/stat4701-edav-d3/stat4701-edav-d3.github.com/master/remark-develop/img/googlemap.jpg)   
# A Crash Course from Shapefile to TopoJSON (and some GeoJSON) using GDAL/OGR

---

# Agenda

## 1. Introduction
## 2. Getting a Shapefile
## 3. Conversion
## 4. Plotting the JSON in D3
## 5. TopoJSON vs. GeoJSON
## 6. Example: Choropleth
## 7. Example: TNoda Map
## 8. Example: Google Flu Data Map

.footnote[Go to directly to [project site](http://stat4701-edav-d3.github.io/)]


---

# 1. Introduction

    some code

![googlemap](https://raw.githubusercontent.com/stat4701-edav-d3/stat4701-edav-d3.github.com/master/remark-develop/img/googlemap.jpg)    
---

# 2. Getting a Shapefile

- Downloading the Shapefile

```js
import urllib

zipLoc = "/Users/danielmsheehan/GitHub/d3-presentation/data/census/states/cb_2013_us_state_20m.zip"
urllib.urlretrieve ("http://www2.census.gov/geo/tiger/GENZ2013/cb_2013_us_state_20m.zip", zipLoc)

import zipfile  
  
zip = zipfile.ZipFile(zipLoc)  
zip.extractall("/Users/danielmsheehan/GitHub/d3-presentation/data/census/states/") 
```
- Geoprocessing


<h2><a href="http://nbviewer.ipython.org/github/stat4701-edav-d3/d3-presentation/blob/master/02-shape-joins-and-convert-to-json.ipynb">IPython Notebook - Geoprocessing</a></h2>


---

# 3. Conversion

##GDAL/OGR

Using [GDAL/OGR](http://www.gdal.org/) convert the Shapefile to JSON. 

    ogr2ogr -f GeoJSON states.json cb_2013_us_state_20m.shp

Then, after installing node.js, we can create TopoJson
    
    topojson states.topo.json states.json

More simply:
    topojson states_cln.topo.json states.json
    
[So here's this TopoJSON file in a simple plot](http://stat4701-edav-d3.github.io/viz/plot_json.html)  

# 4. Plotting the JSON in D3
[The Map](http://stat4701-edav-d3.github.io/viz/plot_json_1.html)
[Here’s the HTML code - randomly projected](https://github.com/stat4701-edav-d3/stat4701-edav-d3.github.com/blob/master/viz/plot_json_1.html)

###Reconfiguring the Map Extents

[The Map with new Extents](http://stat4701-edav-d3.github.io/viz/plot_json_2.html)
[Here’s the HTML code - Project ](https://github.com/stat4701-edav-d3/stat4701-edav-d3.github.com/blob/master/viz/plot_json_2.html)




---

# 5. TopoJSON vs. GeoJSON

![Size compression for country data](http://commondatastorage.googleapis.com/imgserv%2Ffilesize.png)


---

# 6. Example: Chloropleth





---

# 7. TNoda Map




---

# 8. Google Flu Data Map

Motivation: [Vaccine for the 2014-2015 is only 18 percent effective against dominant strain of flu](http://www.nlm.nih.gov/medlineplus/news/fullstory_151174.html)

## Data Sources

- [CDC](http://www.cdc.gov/flu/weekly/fluactivitysurv.htm)

- [Google Flu Trends](https://www.google.org/flutrends/us/#US)

## Getting the Data

- [In Notebook: EDA](http://nbviewer.ipython.org/github/stat4701-edav-d3/d3-presentation/blob/master/01-read-in-source-data-for-all-sources.ipynb)


###Cities Lat/Longs
![cities](https://raw.githubusercontent.com/stat4701-edav-d3/stat4701-edav-d3.github.com/master/remark-develop/img/seeing-latlngs-in-source-from-google-trends.png)
![citiesxcode](https://raw.githubusercontent.com/stat4701-edav-d3/stat4701-edav-d3.github.com/master/remark-develop/img/seeing-latlngs-in-xcode.png)



---



[GDAL/OGR](http://nbviewer.ipython.org/github/stat4701-edav-d3/d3-presentation/blob/master/01-read-in-source-data-for-all-sources.ipynb#GDAL/OGR)



---


    </textarea>
    <script src="http://gnab.github.io/remark/downloads/remark-0.5.9.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
